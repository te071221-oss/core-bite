import requests
from bs4 import BeautifulSoup
import datetime

def get_issue():
# 일단 네이트판 실시간 랭킹을 긁어오는 예시입니다.
header = {'User-Agent': 'Mozilla/5.0'}
url = "https://pann.nate.com/talk/ranking"
try:
res = requests.get(url, headers=header)
soup = BeautifulSoup(res.text, 'html.parser')
title = soup.select_one('.tit').text.strip()
return title
except:
return "실시간 이슈 분석 중..."

def update_html(new_title):
with open("index.html", "r", encoding="utf-8") as f:
content = f.read()

import re
# 제목 부분 교체
content = re.sub(r'id="title".*?>.*?</h2', f'id="title" class="text-xl font-bold mb-4 leading-snug tracking-tight text-gray-800">{new_title}</h2', content, flags=re.DOTALL)

with open("index.html", "w", encoding="utf-8") as f:
f.write(content)

if __name__ == "__main__":
issue_title = get_issue()
update_html(issue_title)
print("업데이트 완료:", issue_title)

